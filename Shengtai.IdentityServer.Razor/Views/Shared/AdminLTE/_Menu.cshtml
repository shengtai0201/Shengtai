@model (Shengtai.IdentityServer.Models.Shared.INavTreeView Nav, IList<string> Roles)
@{
    var active = Model.Nav.Active ? "active" : "";
    var f = Model.Nav.Parent.Header != null ? "fas" : "far";
}
@if (Model.Nav.Type == Shengtai.IdentityServer.Models.Shared.MenuTypes.TreeView)
{
    <a href="#" class='nav-link @active'>
        <i class='nav-icon @f @Model.Nav.Icon'></i>
        <p>
            @Model.Nav.Paragraph.Text
            <i class='right fas fa-angle-left'></i>
            @if (Model.Nav.Paragraph.Badge != null)
            {
                <span class='right badge @Model.Nav.Paragraph.Badge.Class'>@Model.Nav.Paragraph.Badge.Text</span>
            }
        </p>
    </a>
    <ul class="nav nav-treeview">
        @foreach (var menu in Model.Nav.Menus)
        {
            if (menu.Show(Model.Roles))
            {
                var itemClass = menu.Active ? "menu-open" : "";
                <li class='nav-item @itemClass'>
                    @await Html.PartialAsync("~/Views/Shared/AdminLTE/_Menu.cshtml", (menu, Model.Roles))
                </li>
            }
        }
    </ul>
}
else
{
    <a href='@Model.Nav.Url' class='nav-link @active'>
        <i class='nav-icon @f @Model.Nav.Icon'></i>
        <p>
            @Model.Nav.Paragraph.Text
            @if (Model.Nav.Paragraph.Badge != null)
            {
                <span class='right badge @Model.Nav.Paragraph.Badge.Class'>@Model.Nav.Paragraph.Badge.Text</span>
            }
        </p>
    </a>
}